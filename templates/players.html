{% extends "layout.html" %}

{% block title %}Jogadores - FIFA25 Bot{% endblock %}

{% block content %}
<h2 style="margin-bottom: 20px; color: #2c3e50;"> Ranking de Jogadores</h2>

<table>
    <thead>
        <tr>
            <th>Posi莽茫o</th>
            <th>Jogador</th>
            <th>Partidas</th>
            <th>V</th>
            <th>E</th>
            <th>D</th>
            <th>Pontos</th>
            <th>Gols Pr贸</th>
            <th>Gols Contra</th>
            <th>Saldo</th>
            <th>% Vit贸rias</th>
            <th>ltima Partida</th>
        </tr>
    </thead>
    <tbody>
        {% if players %}
            {% for player in players %}
            <tr>
                <td><strong>{{ (pagination.page - 1) * pagination.per_page + loop.index }}</strong></td>
                <td><strong>{{ player.nickname }}</strong></td>
                <td>{{ player.total_matches }}</td>
                <td style="color: #27ae60; font-weight: bold;">{{ player.wins }}</td>
                <td style="color: #f39c12;">{{ player.draws }}</td>
                <td style="color: #e74c3c;">{{ player.losses }}</td>
                <td><strong>{{ player.points }}</strong></td>
                <td>{{ player.goals_for }}</td>
                <td>{{ player.goals_against }}</td>
                <td style="font-weight: bold; {% if player.goal_difference > 0 %}color: #27ae60;{% elif player.goal_difference < 0 %}color: #e74c3c;{% endif %}">
                    {% if player.goal_difference > 0 %}+{% endif %}{{ player.goal_difference }}
                </td>
                <td>
                    <strong style="{% if player.win_rate >= 50 %}color: #27ae60;{% else %}color: #e74c3c;{% endif %}">
                        {{ "%.1f"|format(player.win_rate) }}%
                    </strong>
                </td>
                <td>
                    {% if player.last_seen %}
                        {{ player.last_seen.strftime('%d/%m/%Y') }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="12" style="text-align: center; padding: 30px; color: #95a5a6;">
                    Nenhum jogador cadastrado ainda
                </td>
            </tr>
        {% endif %}
    </tbody>
</table>

{% if pagination.pages > 1 %}
<div class="pagination">
    {% if pagination.has_prev %}
        <a href="?page={{ pagination.prev_num }}">芦 Anterior</a>
    {% endif %}
    
    {% for page in pagination.iter_pages() %}
        {% if page %}
            {% if page == pagination.page %}
                <span class="active">{{ page }}</span>
            {% else %}
                <a href="?page={{ page }}">{{ page }}</a>
            {% endif %}
        {% else %}
            <span>...</span>
        {% endif %}
    {% endfor %}
    
    {% if pagination.has_next %}
        <a href="?page={{ pagination.next_num }}">Pr贸xima 禄</a>
    {% endif %}
</div>
{% endif %}

<div style="margin-top: 30px; padding: 20px; background: #ecf0f1; border-radius: 8px;">
    <h3 style="margin-bottom: 10px; color: #2c3e50;">癸 Legenda</h3>
    <p><strong>V:</strong> Vit贸rias | <strong>E:</strong> Empates | <strong>D:</strong> Derrotas</p>
    <p><strong>Pontos:</strong> Vit贸ria = 3 pontos, Empate = 1 ponto</p>
    <p><strong>Saldo:</strong> Diferen莽a entre gols pr贸 e contra</p>
</div>
{% endblock %}