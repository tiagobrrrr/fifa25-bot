{% extends "layout.html" %}

{% block title %}Partidas - FIFA25 Bot{% endblock %}

{% block content %}
<h2 style="margin-bottom: 20px; color: #2c3e50;">ðŸŽ® Partidas</h2>

<div style="margin-bottom: 20px; display: flex; gap: 15px; flex-wrap: wrap;">
    <div>
        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Filtrar por Status:</label>
        <select onchange="window.location.href='?status=' + this.value + '&location={{ current_location }}'" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
            <option value="all" {% if current_status == 'all' %}selected{% endif %}>Todas</option>
            <option value="2" {% if current_status == '2' %}selected{% endif %}>Ao Vivo</option>
            <option value="3" {% if current_status == '3' %}selected{% endif %}>Finalizadas</option>
            <option value="1" {% if current_status == '1' %}selected{% endif %}>Agendadas</option>
        </select>
    </div>
    
    <div>
        <label style="display: block; margin-bottom: 5px; font-weight: 600;">Filtrar por Local:</label>
        <select onchange="window.location.href='?status={{ current_status }}&location=' + this.value" style="padding: 10px; border-radius: 5px; border: 1px solid #ddd;">
            <option value="all" {% if current_location == 'all' %}selected{% endif %}>Todos</option>
            {% for location in locations %}
            <option value="{{ location }}" {% if current_location == location %}selected{% endif %}>{{ location }}</option>
            {% endfor %}
        </select>
    </div>
</div>

<table>
    <thead>
        <tr>
            <th>Data/Hora</th>
            <th>Local</th>
            <th>Jogador 1</th>
            <th>Time 1</th>
            <th>Placar</th>
            <th>Time 2</th>
            <th>Jogador 2</th>
            <th>Status</th>
        </tr>
    </thead>
    <tbody>
        {% if matches %}
            {% for match in matches %}
            <tr>
                <td>{{ match.date.strftime('%d/%m %H:%M') }}</td>
                <td><strong>{{ match.location }}</strong></td>
                <td>{{ match.player1_nickname }}</td>
                <td>{{ match.player1_team }}</td>
                <td style="text-align: center; font-weight: bold; font-size: 1.1em;">
                    {{ match.player1_score }} - {{ match.player2_score }}
                </td>
                <td>{{ match.player2_team }}</td>
                <td>{{ match.player2_nickname }}</td>
                <td>
                    {% if match.status_id == 2 %}
                        <span class="badge badge-live">AO VIVO</span>
                    {% elif match.status_id == 3 %}
                        <span class="badge badge-finished">FINALIZADA</span>
                    {% else %}
                        <span class="badge badge-scheduled">AGENDADA</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan="8" style="text-align: center; padding: 30px; color: #95a5a6;">
                    Nenhuma partida encontrada com os filtros selecionados
                </td>
            </tr>
        {% endif %}
    </tbody>
</table>

{% if pagination.pages > 1 %}
<div class="pagination">
    {% if pagination.has_prev %}
        <a href="?page={{ pagination.prev_num }}&status={{ current_status }}&location={{ current_location }}">Â« Anterior</a>
    {% endif %}
    
    {% for page in pagination.iter_pages() %}
        {% if page %}
            {% if page == pagination.page %}
                <span class="active">{{ page }}</span>
            {% else %}
                <a href="?page={{ page }}&status={{ current_status }}&location={{ current_location }}">{{ page }}</a>
            {% endif %}
        {% else %}
            <span>...</span>
        {% endif %}
    {% endfor %}
    
    {% if pagination.has_next %}
        <a href="?page={{ pagination.next_num }}&status={{ current_status }}&location={{ current_location }}">PrÃ³xima Â»</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}